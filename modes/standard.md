# Режим «Стандартный»

**Для кого:** когда нужна небольшая цельная игра (мало механик, мало экранов) с полным процессом и умеренным стилем кода.

## Цель

Небольшая по объёму цельная игра. Мало механик, мало экранов — «минимальная цельная игра». Процесс обычный: этапы, файлы состояния ведутся.

## Уточняющие вопросы

- **Перед планом:** да. Уточнить жанр, механики, экраны, стиль, платформу — всё что неясно.
- **Перед фичей:** да, **если есть сомнения**. Если механика или UI неоднозначны — спросить пользователя. Если всё понятно — делать без вопросов.
- **По ходу:** при неясностях — спросить. При ясности — не спрашивать.
- Можно отключить/включить по просьбе пользователя.

## Воркфлоу

1. Уточняющие вопросы → прояснить детали.
2. Краткий набросок (жанр, 2–3 механики, 2–3 экрана).
3. Короткие этапы с чеклистом по этапу.
4. Reuse-first (по умолчанию): перед реализацией фичи поиск готового решения (библиотека/пакет/ассет/референс-код). Если фича слишком маленькая и простая — писать код вручную. **Перед каждой фичей — уточнить если есть сомнения.**
5. Файлы состояния обязательны (Docs/DEV_STATE + Docs/DEV_PLAN + Docs/DEV_LOG/).

## Reuse-first (поиск готовых решений)

- По умолчанию **включено** (переключатель в `Docs/DEV_CONFIG.md` → «Поиск готовых решений»).
- Приоритет: **библиотека/пакет** → ассет → референс-код.
- Критерии выбора: совместимость с Unity/платформой, активность/поддержка, лицензия, размер зависимости.
- Фиксация решения: записать выбранный вариант и причину в текущий файл итерации в `Docs/DEV_LOG/` (имя: iteration-NN-YYYYMMDD-HHMM.md); если архитектурно важно — также в `Docs/ARCHITECTURE.md`.

## Проверки и тесты

- **Агент обязан сам проверять каждую фичу** перед переходом к следующей: запустить Play Mode, сделать скриншоты игры (не только сцены в редакторе), попробовать поиграть (нажать кнопки, пройти сценарий по фиче). Проверка в редакторе + скриншот/чеклист по фиче.
- Тесты по умолчанию не требуются.
- **QA на фичу:** при запросе настроек (создание Docs/DEV_CONFIG) агент **обязан спросить** пользователя: «QA на фичу: включить (после каждой фичи вы проверяете по шагам, агент ждёт ОК) или только финальная QA в конце?» Значение записать в Docs/DEV_CONFIG.md. Если **включена** — после каждой фичи агент пишет мини-QA-чеклист по шаблону (шаги + ожидаемое + колонка «Проверка агентом» — заполняет сам после проверки + колонка «Проверка QA» — пустая, заполнит пользователь по просьбе агента). Агент не переходит к следующей фиче без ОК пользователя. Если выключена — только финальная QA.
- **Финальная QA:** обязательно в конце — полный QA-чеклист (шаги + ожидаемое поведение + **Проверка агентом** — агент заполняет после своей проверки + **Проверка QA** — оставить пустой, заполнит QA по просьбе агента). См. reference.md → «Шаблон QA-чеклиста».

## Набросок

Краткий: жанр, 2–3 механики, 2–3 экрана (меню, геймплей, настройки и т.д.).

## Этапы

Короткие этапы с чеклистом по каждому этапу. Указывать файлы/сцены/префабы и что проверить в Unity.

## Файлы состояния

Обязательны. `Docs/DEV_STATE.md` — контекст + текущая задача + блокеры + ближайшие 3–5 (обновлять при каждом действии). `Docs/DEV_PLAN.md` — все задачи с чекбоксами. `Docs/DEV_LOG/iteration-NN-YYYYMMDD-HHMM.md` — записи о завершённых задачах (можно упрощённо).

## Стиль кода

**Умеренный (стандартный)** — чёткое разделение данных (SO) и логики, разумная структура без избыточной архитектуры. **Все настройки в SO** (NpcData, GameFightData, UiData и т.д.). См. [SKILL.md](../SKILL.md) — правило «настройки только в SO».

### Логирование (Стандартный)

- **Обильное и уместное.** Логировать ключевые события, смену состояний, ошибки, предупреждения.
- Формат: `Debug.Log($"[Фича.Класс.Метод] описание с параметрами")`.
  - Пример: `Debug.Log($"[Spawn.WaveSpawner.StartNextWave] Wave {wave}: {count} enemies")`.
- Не логировать каждый кадр.

## Пример наброска (Стандартный)

```
Жанр: Top-down шутер.
Механики: WASD-движение, стрельба мышью, волны врагов.
Экраны: MainMenu, Gameplay, GameOver.
Данные: PlayerData (speed, fireRate, maxHealth), EnemyData (speed, health, damage), WaveData (enemyCount, spawnInterval).
```

## Пример этапов (Стандартный)

```
Этап 1: Сцена Gameplay + персонаж с движением.
  - Файлы: PlayerController.cs, PlayerData.asset
  - Проверить: WASD работает, скорость из SO.
Этап 2: Стрельба.
  - Файлы: ShootController.cs, BulletPrefab
  - Проверить: пули летят к курсору, fireRate из SO.
Этап 3: Враги и волны.
  - Файлы: Enemy.cs, EnemyData.asset, WaveSpawner.cs, WaveData.asset
  - Проверить: враги спавнятся, идут к игроку, параметры из SO.
Этап 4: UI (HUD + меню + GameOver).
  - Файлы: UIManager.cs, UiData.asset, сцены MainMenu/GameOver
  - Проверить: HP-бар, счёт, переходы между сценами.
Этап 5: Полировка (баланс через SO, звук).
```

## Чеклист режима «Стандартный»

- [ ] Уточняющие вопросы → краткий набросок (жанр, 2–3 механики, 2–3 экрана).
- [ ] Подробный план: короткие этапы с чеклистом по этапу.
- [ ] **Перед каждой фичей** — если есть сомнения, задать уточняющий вопрос пользователю.
- [ ] Реализация по этапам, умеренный стиль кода, все данные в SO.
- [ ] **После каждой фичи** — агент сам проверяет: Play Mode, скриншоты игры, попытка поиграть (кнопки, сценарий). Затем скриншот/чеклист в Docs/DEV_STATE. Если в Docs/DEV_CONFIG «QA на фичу» включена — написать QA-шаги, дождаться ОК пользователя перед следующей фичей.
- [ ] Файлы состояния (DEV_STATE/PLAN/LOG) вести обязательно, обновлять при каждом действии.
- [ ] **Финальная QA** — составить полный QA-чеклист по шаблону (шаги, ожидаемое поведение, колонка «Проверка агентом» — заполнить самому, колонка «Проверка QA» — пустая, для заполнения по просьбе агента).
